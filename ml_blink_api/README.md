# ML-Blink API

This document lists all the endpoints defined by the resources the ML-Bink API exposes.

## Resources:

### Users
  - Description: A user who can log in/out of the API, create, and read resources from it.
  - Endpoints:
    - `POST /users`: create a user
      - Requires authentication: no
      - Schema validation: [User](https://github.com/diegocasmo/ml_blink_api/blob/master/ml_blink_api/models/user.py)
        - Note: As of now, the API only supports creating a single user, which must have the same email as the `TEMP_TEST_USER_EMAIL` environmental variable.

### Candidates
  - Description: A candidate represents a mission setup which is considered to be interesting by the AI Crawler
  - Endpoints:
    - `GET /candidates/oldest`: retrieves the oldest candidate generated by the AI Crawler
      - Requires authentication: no
      - Note that if there are no candidates generated by the AI Crawler, it will pseudo-randomly generate a candidate on the fly an return it instead

### Missions
  - Description: An ML-Blink mission details.
  - Endpoints:
    - `GET /missions`: get all missions
      - Requires authentication: no
    - `POST /missions`: create a mission
      - Requires authentication: no
      - Schema validation: [Mission](https://github.com/diegocasmo/ml_blink_api/blob/master/ml_blink_api/models/mission.py)
        - Notes:
          - The `user_id` attribute is automatically added by the API to the mission. The `user_id` will for now always be equal to the temporary test user `_id`.
          - Once a mission is created in DB, a Celery task named `process_created_mission` is called order to determine if such mission was created from a candidate generated by the AI-Crawler.
    - `GET /missions/max_accuracy?image_key=int`: return the maximum accuracy achieved among all missions that belong to an `image_key`. If the `image_key` query parameter is not provided, it will return the maximum accuracy of all missions' `image_key` in the database
      - Requires authentication: no

### Comments
  - Description: Comments related to an `image_key`.
  - Endpoints:
    - `GET /comments?image_key=int`: get all comments that belong to an `image_key`. If the `image_key` query parameter is not provided, it will return all comments in the database
      - Requires authentication: no
    - `POST /comments`: create a comment
      - Requires authentication: no
      - Schema validation: [Comment](https://github.com/diegocasmo/ml_blink_api/blob/master/ml_blink_api/models/comment.py)
        - Note: the `user_id` attribute is automatically added by the API to the comment. The `user_id` will for now always be equal to the temporary test user `_id`.
